<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0 from src/site/markdown/extension/injecting-extensions.md at 2025-05-27
 | Rendered using Apache Maven Fluido Skin 2.1.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0" />
    <title>Injecting extensions – junit-support</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-2.1.0.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script src="../js/apache-maven-fluido-2.1.0.min.js"></script>
  </head>
  <body>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h1>junit-support</h1></div></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2025-05-27<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 3.1</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">junit-support</li>
    <li><a href="../index.html">Overview</a></li>
    <li><a href="../download.html">Download</a></li>
    <li><a href="https://github.com/robtimus/junit-support/releases">Releases</a></li>
    <li><a href="../apidocs/index.html">Javadoc</a></li>
   <li class="nav-header">Extensions</li>
    <li><a href="../extension/test-resource.html">@TestResource</a></li>
    <li><a href="../extension/test-logger.html">@TestLogger</a></li>
    <li><a href="../extension/disable-logging.html">@DisableLogging</a></li>
    <li><a href="../extension/log-on-failure.html">@LogOnFailure</a></li>
   <li class="nav-header">Extension Support</li>
    <li><a href="../extension/method-lookup.html">MethodLookup</a></li>
    <li class="active"><a>Injection extensions</a></li>
   <li class="nav-header">Various</li>
    <li><a href="../pre-defined-tests.html">Pre-defined tests</a></li>
    <li><a href="../assertion-failed-error-builder.html">AssertionFailedErrorBuilder</a></li>
    <li><a href="../additional-assertions.html">Additional assertions</a></li>
    <li><a href="../parameterized-test-support.html">Parameterized test support</a></li>
    <li><a href="../testing-concurrent-code.html">Testing concurrent code</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="../project-info.html"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="../project-reports.html"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
<a href="https://maven.apache.org/" class="builtBy" target="_blank"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn" class="span10">

<section><section><a id="Injecting_extensions"></a>
<h2>Injecting extensions</h2>
<p>Class <a href="../apidocs/com.github.robtimus.junit.support/com/github/robtimus/junit/support/extension/InjectingExtension.html">InjectingExtension</a> can be used as base class for JUnit extensions that can inject objects into fields, constructor parameters or method parameters.</p>
<p>To create such an extension:</p>
<ul>

<li>Add a no-argument constructor that passes a field predicate and the result of calling <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/invoke/MethodHandles.html#lookup()" class="externalLink">MethodHandles.lookup()</a> to the <code>InjectingExtension</code> constructor.</li>
<li>Implement <code>validateTarget</code>. This method takes the injection target (see below) and the extension context, and should return an empty <code>Optional</code> if the injection target is valid, or an <code>Optional</code> with a <code>JUnitException</code> otherwise. The exception should be provided by one of the injection target argument's <code>createException</code> methods.</li>
<li>Implement <code>resolveValue</code>. This method takes the injection target and the extension context, and should return the value to inject.</li>
</ul>
<p>The injection target is provided as an instance of class <a href="../apidocs/com.github.robtimus.junit.support/com/github/robtimus/junit/support/extension/InjectionTarget.html">InjectionTarget</a>, and provides an abstraction of the field, constructor parameter or method parameter. It offers methods to provide the injection target's type, find annotations, or create exceptions without having to know whether the target is a field, a constructor parameter or a method parameter.</p><section><a id="Annotation_based_injection"></a>
<h3>Annotation based injection</h3>
<p>Class <a href="../apidocs/com.github.robtimus.junit.support/com/github/robtimus/junit/support/extension/AnnotationBasedInjectingExtension.html">AnnotationBasedInjectingExtension</a> extends <code>InjectingExtension</code> and allows injection based on an annotation.</p>
<p>To create such an extension:</p>
<ul>

<li>Add a no-argument constructor that passes the annotation type and the result of calling <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/invoke/MethodHandles.html#lookup()" class="externalLink">MethodHandles.lookup()</a> to the <code>AnnotationBasedInjectingExtension</code> constructor.</li>
<li>Implement <code>validateTarget</code>. This method takes the injection target, the annotation and the extension context, and should return an empty <code>Optional</code> if the injection target is properly annotated, or an <code>Optional</code> with a <code>JUnitException</code> otherwise. The exception should be provided by one of the injection target argument's <code>createException</code> methods.</li>
<li>Implement <code>resolveValue</code>. This method takes the injection target, the annotation and the extension context, and should return the value to inject.</li>
</ul>
<p>For an example extension, see <a href="https://github.com/robtimus/junit-support/blob/master/src/main/java/com/github/robtimus/junit/support/extension/testresource/TestResourceExtension.java" class="externalLink">TestResourceExtension</a>.</p></section></section></section>        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>©      2020–2025
</p>
        </div>
      </div>
    </footer>
  </body>
</html>
